#include <iostream>
#include <stdio.h>
#include <string.h>
using namespace std;

int N, M;
char grid[105][105];
double memo[105][105];

double DP(int i, int j) {

	if(i == N) return 0.0;

	double & ref = memo[i][j];
	if(ref == ref) return ref;
	ref = 0.0;

	if(isdigit(grid[i][j]))
		ref += (grid[i][j] - '0');
	else if(grid[i][j] == '*')
		ref += (DP(i+1, j-1) + DP(i+1, j+1)) * 0.5;
	else
		ref += DP(i+1, j);

	return ref;
}

int main() {

	int T;
	scanf("%d", &T);

	while(T--) {
		memset(memo, -1, sizeof memo);
		scanf("%d%d", &N, &M);
		for(int i=0; i<N; i++)
			scanf("%s", grid[i]);
		double ans = 0.0;
		for(int j=0; j<M; j++)
			ans = max(ans , DP(0, j));
		printf("%0.6lf\n", ans);
	}

	return 0;
}
